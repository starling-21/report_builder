{% extends 'reports/base.html' %}
{% block extra_head %}
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>



    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/css/select2.min.css" rel="stylesheet"/>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/js/select2.min.js"></script>
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
{#            <div class="col-2">#}
{#                <form method="POST">#}
{#                    {% csrf_token %}#}
{#                    <input type="text" id="searched_data">#}
{#                    <input id="search-button" type="submit" value="Ok">#}
{#                </form>#}
{#            </div>#}


{#            <div class="col-3">#}
{#                <form method="POST">#}
{#                    {% csrf_token %}#}
{#                    <div id="test_members">#}
{#                        {% for serviceman in service_members_list %}#}
{#                            {{ serviceman.rank }} {{ serviceman }}<br>#}
{#                        {% endfor %}#}
{#                    </div>#}
{#                </form>#}
{#            </div>#}


{#            <div class="col-7">#}
{#                <select id="member-selected" class="selectpicker" data-live-search="true" data-width="auto">#}
{#                    {% for serviceman in service_members_list %}#}
{#                        <option value="{{ serviceman.id }}">#}
{#                            {{ serviceman.rank }} {{ serviceman }}#}
{#                        </option>#}
{#                    {% endfor %}#}
{#                        <option value="Internet Explorer">Internet Explorer</option>#}
{#                        <option value="Firefox">Firefox</option>#}
{#                        <option value="Chrome">Chrome</option>#}
{#                        <option value="Opera">Opera</option>#}
{#                        <option value="Safari">Safari</option>#}
{#                        <option value="Internet Explorer 2">Internet Explorer 2</option>#}
{#                        <option value="Firefox Okks 2">Firefox Okks 2</option>#}
{#                        <option value="Chrome Oka 2">Chrome Oka 2</option>#}
{#                        <option value="Opera Or Edge 2">Opera Or Edge 2</option>#}
{#                        <option value="Safari Or 2">Safari Or 2</option>#}
{#                </select>#}
{#            </div>#}

        </div>
    </div>







{#    <div class="container">#}
{##}
{#        <div class="row">#}
{#            <div class="col-6">#}
{#                <select class="js-example-basic-single" name="state">#}
{#                </select>#}
{#            </div>#}
{##}
{#        </div>#}
{#    </div>#}

{% endblock %}


{% block js_scripts %}

<script>
        $(document).ready(function () {
            // Initialize select2
            var csrf_token = '{{ csrf_token }}';
            $('select').select2({
                placeholder: "Пошук (Імена та Прізвища з Великої літери)",
                allowClear: true,
                language: "ru",
                delay: 250,
                width: '400px',

                ajax: {
                    csrfmiddlewaretoken: csrf_token,
                    url: '/search_member/',
                    method: 'POST',
                    dataType: 'json',
                    // Additional AJAX parameters go here; see the end of this chapter for the full code of this example
                    data: function (params) {
                        var query = {
                            csrfmiddlewaretoken: csrf_token,
                            filter_param: params.term,
                            name_format: $(this).attr('title')
                        }
                        return query;
                    },
                    processResults: function (data) {
                        // Transforms the top-level key of the response object from 'items' to 'results'
                        //console.log("success")
                        console.log(data)
                        return {
                            results: data
                        };
                    }
                }
            });
        });

    </script>
{% endblock %}