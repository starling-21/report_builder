{% extends 'reports/base.html' %}

{#TEST include#}
{% include "django/forms/widgets/input.html" %}

{% block content %}
    <p><u><i>Всі "посередники":</i></u></p>

    <form method="POST">{% csrf_token %}
        <hr>
        <hr>
        {% for servicemember in serviceman_chain %}
            {# editing chain member id, show input field for new chain member in chain members line #}
            {% if swap_id == servicemember.id %}
                {#                <button disabled class="btn btn-light btn-sm"><span class="fas fa-edit"></span></button> {#chain editing button#}
                New servicemember:
                <br><input name="swap_id">
                <button type="submit" class="btn btn-light btn-sm" name="submit_new_id" value="{{ servicemember.id }}">
                    <span class="fas fa-check-square"></span> Ok
                </button> {#submit chain member id editing button#}

            {% else %}
                {# show NORMAL CHAIN member line #}
                {{ servicemember.rank.name }} {{ servicemember }}
                <br>{{ servicemember.position }}
                <br>
                {% if not forloop.first %}
                    <button type="submit" class="btn btn-light btn-sm" name="edit_chain_id"
                            value="{{ servicemember.id }}"><span class="fas fa-edit"></span></button>
                {% endif %}
                {% if not forloop.first and not forloop.last %}
                    <button type="submit" class="btn btn-light btn-sm" name="remove_chain_id"
                            value="{{ servicemember.id }}"><span class="far fa-trash-alt"></span></button>
                {% endif %}

            {% endif %}
            <hr>
            <hr>
        {% endfor %}


        <input type="submit" class="btn btn-info" name="submit_chain_editing" value="Далі"/>
    </form>


{% endblock %}


{#block submitting form by pressing Enter button#}
{% block js_scripts %}
    <script type="text/javascript">
        window.addEventListener('keydown', function (e) {
            if (e.keyIdentifier == 'U+000A' || e.keyIdentifier == 'Enter' || e.keyCode == 13) {
                if (e.target.nodeName == 'INPUT' && e.target.type == 'text') {
                    e.preventDefault();
                    return false;
                }
            }
        }, true);
    </script>
{% endblock %}